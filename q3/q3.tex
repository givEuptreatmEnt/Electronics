\documentclass[12pt, a4paper]{article}
\input{header.tex}

%% Note that for label to be correct, compile more than 2 times is needed ... %%


%%%%%%%%%%%%%%%Title的資訊%%%%%%%%%%%%%%%
\title{} %標題
\author{} %作者
\date{} %日期


\begin{document}
\tikzstyle{default}=[thick, color=black]
% \maketitle %製作tilte page
% \thispagestyle{empty}  %去除頁碼
% \thispagestyle{fancy}  %使用fancyhdr
% \tableofcontents %目錄
%%%%%%%%%%%%%%%%%%%include file here%%%%%%%%%%%%%%%%%%%%%%%%%
% 7: 9
\section{5.10}
Consider an n-channel MOSFET with $t_{ox} = \SI{20}\nm$, $\mu_{n} = \SI{650}{\cm\squared\per\V\per\s}$, $V_t = \SI{0.8}\V$ and $W/L = 10$. Find the drain current in the following cases:

\begin{enumerate}[label=(\alph*)]
  \item $v_{GS} = \SI{5}{\V}$ and $v_{DS} = \SI{1}{\V} $\\[5pt]
    \Ans \\
    First we calculate 
    \[ k_n = \mu_n C_{ox} (W / L) = \mu_n \varepsilon_{ox} (W / L) /  t_{ox} \approx \SI{1.12}{\mA\per\V\squared} \]
    Since $v_{GS} > V_t$ and $v_{GS} - v_{DS} = \SI{4}{\V} > V_t$, the MOS is working on the triode region, so 
    \[
      i_D =  k_n \left(v_{GS} - V_t - \frac{1}{2}v_{DS} \right)v_{DS} \approx \SI{4.14}{\mA} 
    \]
  \item $v_{GS} = \SI{2}{\V}$ and $v_{DS} = \SI{1.2}{\V} $\\[5pt]
    \Ans \\
    Now $V_{GS} > V_t$ and $V_{GS} - V_{DS} = \SI{0.8}{\V} = V_t$, the MOS is working on the boundary of the saturation and the triode region, so 
    \[
      i_D = \frac{1}{2} k_n (V_{GS} - V_t)^2 \approx \SI{1.61}{\mA} 
    \]
  \item $v_{GS} = \SI{5}{\V}$ and $v_{DS} = \SI{0.2}{\V} $\\[5pt]
    \Ans \\
    Again $V_{GS} > V_t$ and $V_{GS} - V_{DS} = \SI{4.8}{\V} > V_t$, the MOS is working on the triode region, so 
    \[
      i_D =  k_n \left(v_{GS} - V_t - \frac{1}{2}v_{DS} \right)v_{DS} \approx \SI{0.92}{\mA} 
    \]
  \item $v_{GS} = \SI{5}{\V}$ and $v_{DS} = \SI{5}{\V} $\\[5pt]
    \Ans \\
    Finally since $V_{GS} > V_t$ and $V_{GS} - V_{DS} = \SI{0}{\V} < V_t$, the MOS is working on the saturation region, so 
    \[
      i_D =  \frac{1}{2} k_n (v_{GS} - V_t)^2 \approx \SI{9.88}{\mA} 
    \]
\end{enumerate}
% 18: 23
\section{5.20}
The table below lists 10 different cases labeled (a) to (j) for operating an NMOS transistor with $V_t = \SI{1}{\V} $. In each case the voltages at the source, gate, and drain (relative to the circuit ground) are specified. You are required to complete the tabel entries. Note that if you encounter a case for which $v_{DS}$ is negative, you should exchange the drain and source before solving the problem. You can do this because the MOSFET is a symmetric device.


\Ans \\
\begin{center}
  \begin{tabular}{|l|c|c|c|c|c|c|c|}
    \hline
    & \multicolumn{6}{c|}{Voltage \si\V} & \\ \cline{2-7}
    Case & $V_S$ & $V_G$ & $V_D$ & $V_{GS}$ & $V_{OV}$ & $V_{DS}$ & Region of operation \\
    \hline
    a & $+1.0$ & $+1.0$ & $+2.0$ & $0$ & $0$ & $1.0$ & Cut-off \\
    b & $+1.0$ & $+2.5$ & $+2.0$ & $1.5$ & $0.5$ & $1.0$ & Saturation \\
    c & $+1.0$ & $+2.5$ & $+1.5$ & $1.5$ & $0.5$ & $0.5$ & Boundary of Sat./Tri. \\
    d & $+1.0$ & $+1.5$ & $+2.0$ & $0.5$ & $0$ & $1.0$ & Cut-off \\
    e & $0$ & $+2.5$ & $+1.0$ & $2.5$ & $1.5$ & $1$ & Triode \\
    f & $+1.0$ & $+1.0$ & $+1.0$ & $0$ & $0$ & $0$ & Cut-off \\
    g & $-1.0$ & $0$ & $0$ & $1.0$ & $0$ & $1.0$ & Boundary of Cut./Sat. \\
    h & $-1.5$ & $0$ & $0$ & $1.5$ & $0.5$ & $1.5$ & Saturation \\
    i & $-1.0$ & $0$ & $+1.0$ & $1.0$ & $0$ & $2.0$ & Saturation \\
    j & $+0.5$ & $+2.0$ & $+0.5$ & $1.5$ & $0.5$ & $0$ & Triode \\
    \hline
  \end{tabular}
\end{center}

\clearpage
% 21: 26
\section{5.29}
All the transistors in te circuits shown in Fig.~\ref{fig:5.29} have the
same values of $\abs{V_t}, k', W/L$, and $\lambda$. Moreover, $\lambda$ is
negligibly small. All operate in saturation at $I_D = I$ and $\abs{V_{GS}}
 = \abs{V_{DS}} = \SI{3}{\V}$. Find the voltages $V_1, V_2, V_3$, and $V_4$.
If $\abs{V_t} = \SI{1}{\V}$ and $I = \SI{2}{\mA}$, how large a resistor can
be inesrted in series with each drain connection while maintaining saturation?
What is the largest resistor that can be placed in series with each gate?
If the current source $I$ requires at least $\SI{2}{\V}$ between its terminals
to operate properly, whatis the largest resistor that can be placed in series
with each MOSFET source while ensuring saturated-mode operation of each
transistor at $I_D = I$? In the latter limiting situation, what do $V_1, V_2,
V_3$, and $V_4$ become?

% 38: 46
\section{5.34}
The NMOS transistors in the circuit of  Fig.~\ref{fig:5.34} have $V_t = \SI{1}{\V} , \mu_n C_{ox} = \SI{120}{\uA\per\V\squared}, \lambda = 0$ and $L_1 = L_2 = L_3 = \SI{1}{\um} $. Find the required values of gate width for each of $Q_1$, $Q_2$, and $Q_3$ to obtain the voltage and current values indicated.

\begin{figure}[H]
  \centering
  \begin{circuitikz}[>=triangle 45, scale=1, transform shape]
    \draw[default] (0, 1) node[nmos, label={[shift={(0.4, -0.3)}]$Q_1$}](nm1){};
    \draw[default] (0, 2.5) node[nmos, label={[shift={(0.4, -0.3)}]$Q_2$}](nm2){};
    \draw[default] (0, 4) node[nmos, label={[shift={(0.4, -0.3)}]$Q_3$}](nm3){};
    \draw[color=black, thick] let \p1=(nm1) in
    (0, \x1) node[ground]{} to [short] (nm1.source);
    \draw[default] (nm1.gate) |- (nm1.drain) to[short, *-o] ++(0.5, 0) node[right]{$+\SI{1.5}{\V}$};
    \draw[default] (nm2.gate) |- (nm2.drain) to[short, *-o] ++(0.5, 0) node[right]{$+\SI{3.5}{\V}$};
    \draw[default] (nm3.gate) |- (nm3.drain) to[short, *-, i<_=120<\uA>] ++(0, 0.5);
    \draw[color=black, thick, ->]
      ($(nm3.drain) + (0, 0.3)$) to ++(0, 0.5) node[above]{$+\SI{5}{\V}$}
      ;
  \end{circuitikz}
  \caption{}
  \label{fig:5.34}
\end{figure}

\Ans \\
Notice that every MOS is working on saturation region, since $v_D = v_G$,  hence $v_{DS} > v_{GS} - V_t$. Now for $Q_1, Q_3$, $V_{OV} = v_{GS} - V_t = \SI{0.5}{\V} $ and for $Q_2$, $V_{OV} = \SI{1}{\V} $.
Hence by solving 
\[
  \frac{1}{2} \mu_n C_{ox} \frac{W}{L} V_{OV}^2 = I_D = \SI{120}{\uA} 
\]
We get $W_1 = W_3 = \SI{8}{\um} , W_2 = \SI{2}{\um} $

% 40: 48
\section{5.41}
For the devices in the circuits of Figure~\ref{fig:5.41}, $ \abs{V_t} = \SI{1}{V} , \lambda = 0, \mu_n C_{ox} = \SI{50}{\uA\per\V\squared}, L = \SI{1}{\um}$, and $W = \SI{10}{\um}$. Find $V_2$ and $I_2$. How do these values change if $Q_3$ and $Q_4$ are made to have $W = \SI{100}{\um}$?
\begin{figure}[H]
  \centering
  \begin{circuitikz}[>=triangle 45]
    \draw[default] (0, 0) node[nmos, xscale=-1] (Q3) {}
    (Q3.S) node[ground] {}
    (Q3.D) to[short, i<_=$I_2$] ++(0, 0.5) node[](p1){} to [short, *-o] ++(-0.5, 0) node[left]{$V_2$}
    (p1) to[short] ++(0, 0.5) node[nmos, anchor=S](Q4){}
    (Q3.G) to[short] ++(0.5, 0) node[circ](p2){} to[short] ++(0.5, 0) node[nmos, anchor=G](Q1) {}
    (Q1.S) node[ground]{}
    (p2) |- ($(Q1.D) + (0, 0.5)$) node[circ](p3){} -- (Q1.D)
    (p3) to[short, i<^={\color{blue}$I_1$}] ++(0, 0.5) node[nmos, xscale=-1.0, anchor=S](Q2){}
    (Q1) node[right]{$Q_1$}
    (Q2) node[left]{$Q_2$}
    (Q3) node[left]{$Q_3$}
    (Q4) node[right]{$Q_4$}
    ($(p2) + (0, 4.5)$) node[]{$+\SI{5}{\V}$}
    (p3) node[right]{\color{blue}$V_1$}
    ; 
    \draw[default, ->] (Q4.D) -- ++(0, 1);
    \draw[default, ->] (Q4.G) -| ++(-0.2, 1.75);
    \draw[default, ->] (Q2.D) -- ++(0, 1);
    \draw[default, ->] (Q2.G) -| ++(0.2, 1.75);
    \draw[dashed, color=blue] (p1) -- (p3);
  \end{circuitikz}
  \caption{}
  \label{fig:5.41}
\end{figure}


\Ans \\
Notice that if we connect the blue dashed line in the figure, the circuit is now symmetric. Moreover, all the MOS are working in saturation region.
Now $Q_1, Q_2, Q_3, Q_4$ has the same $k_n$, and the current go through $Q_4, Q_2$ is equal to the current that go through $Q_3, Q_1$. So by symmetry, $V_2 = V_1 =  \SI{5}{V} / 2 = \SI{2.5}{\V}$. Notice that there is no currenct go through the blue dashed line, so if we remove the line, the voltage remains unchanged. Hence we know that in the origin circuit, $V_2 = \SI{2.5}{\V}$.
\begin{align*}
  k_n &= \mu_n C_{ox} (W / L) = \SI{0.5}{\mA} \\
  V_2 &= v_{GS} = \SI{2.5}{\V} \\
  I_2 &= \frac{1}{2} k_n (v_{GS} - V_t) ^2 = \SI{562.5}{\uA}
\end{align*}
Simmilarly, if now $W_{3,4} = \SI{100}{\um}$, $k_n$ is $10$ times greater than before, so $I_2 = \SI{5.625}{\mA}$.

% 45: 53
\section{5.43}

\section{5.46}
Figure~\ref{fig:5.46} shows an amplifier in which the load resistor $R_D$ has been replaced with another NMOS transistor $Q_1$ connected as a two-terminal device. Note that because $v_{DG}$ of $Q_2$ is zero, it will be operating in saturation at all times, even when $v_I = 0$ and $i_{D2} = i_{D1} = 0$. Note also that the two transistors conduct equal drain currents. Using $i_{D1} = i_{D2}$, show that for the range of $v_I$ over which $Q_1$ is operating in saturation, that is , for
\[ V_{t1} \leq v_I \leq v_O +V_{t1} \]
the output voltage will be given by
\[ v_O = V_{DD} - V_t + \sqrt{ \frac{W_1/L_1}{W_2/L_2} }V_t - \sqrt{ \frac{W_1/L_1}{W_2/L_2} }v_I \]

\begin{figure}[H]
  \centering
  \begin{circuitikz}[>=triangle 45]
    \draw[default] 
    (0, 0) node[ground]{} node[nmos, anchor=S](Q1){}
    (Q1.G) to[short, -o] ++(-0.5, 0) node[left]{$v_I$}
    (Q1.D) to[short, i^<={\color{red}$i_{D1}$}] ++(0, 0.5) node[](p1){} to[short, *-o] ++(0.5, 0) node[right]{$v_O$}
    (p1) to[short] ++(0, 0.5) node[nmos, anchor=S](Q2){}
    ($(Q2.D) + (0, 0.5)$) node[circ](p2){} -| (Q2.G)
    (p2) to[short, i^>={\color{red}$i_{D2}$}] (Q2.D)
    (Q1) node[right] {$Q_1$}
    (Q2) node[right] {$Q_2$}
      ;
      
    \draw[default, ->] (p2) -- ++(0, 0.5) node[above]{$V_{DD}$};
  \end{circuitikz}
  \caption{}
  \label{fig:5.46}
\end{figure}

\Ans
Since both the MOS is operating in saturation, we have
\begin{align*}
  i_{D1} &= \frac{1}{2} k'_n \frac{W_1}{L_1} (v_I - V_t)^2 \\
  i_{D2} &= \frac{1}{2} k'_n \frac{W_2}{L_2} (V_{DD} - v_O - V_t)^2 
\end{align*}

By $i_{D1} = i_{D2}$ we obtain
\begin{gather*}
  \frac{W_1}{L_1} (v_I - V_t)^2 = \frac{W_2}{L_2} (V_{DD} - v_O - V_t)^2 \\
  \Rightarrow v_O = V_{DD} - V_t + \sqrt{ \frac{W_1/L_1}{W_2/L_2} } (V_t - v_I) 
\end{gather*}
Which is the desired result.

% 48: 56
\section{5.50}
In this problem we investigate an optimum design of the CS amplifier circuit of Figure~\ref{fig:}. First. use the voltage gain expression $A_v = -g_m R_D$ together with Eq(5.57) for $g_m$ to show that
\[ A_v = -\frac{2I_D R_D}{V_{OV}} = - \frac{2(V_{DD} - V_D)}{V_{OV}} \]
Next, let the maximum positive input signal be $\hat{v_i}$. To keep the second-harmonic distortion to an acceptable level, we bias the MOSFET to operate at an overdrive voltage $V_{OV} \gg \hat{v_i}$. Let $V_{OV} = m\hat{v_i}$. Now, to maximize the voltage gain $\abs{A_v}$, we design for the lowest possible $V_D$. Show that the minimum $V_D$ that is consistent with allowing a negative signal voltage swing at the drain of $\abs{A_v}\hat{v_i}$ while maintaining saturation-mode operation is given by
\[
  V_D = \frac{V_{OV} + \hat{v_i} + 2 V_{DD} (\hat{v_i}/V_{OV})}{1 + 2(\hat{v_i}/V_{OV})} 
\]
Now, find $V_{OV}, V_D, A_v$, and $\hat{v_o}$ for the case $V_{DD} = \SI{3}{\V}, \hat{v_i} = \SI{20}{\mV}, \text{and } m = 10$. If it is desired to operate this transistor at $I_D = \SI{100}{\uA}$, find the values of $R_D$ and $W/L$, assuming that for this process technology $k'_n = \SI{100}{\uA\per\V\squared}$.

\Ans\\
\begin{align*}
  g_m &= \frac{2I_D}{V_{OV}}\\
  A_v &= -g_m R_D = -\frac{2 I_D R_D}{V_{OV}}  = -\frac{2 (V_{DD} - V_D)}{V_{OV}} 
\end{align*}
Let $v_g = V_G + v_i$ be the total gate voltage, $v_d = V_D + A_v v_i$ be the total drain voltage, the saturation condition required that $v_d \geq v_g - V_t$. so
\begin{align*}
  & v_d \geq v_g - V_t \\
  \Rightarrow & V_D + A_v v_i \geq V_G + v_i - V_t  \\
  \Rightarrow & V_D - \frac{2 (V_{DD} - V_D)}{V_{OV}} v_i \geq V_G + v_i - V_t \\
  \Rightarrow  & V_D - \frac{2 (V_{DD} - V_D)}{V_{OV}} \hat{v_i} \geq V_G + \hat{v_i} - V_t \quad \footnotemark \\
  \Rightarrow & \left(1 + \frac{2\hat{v_i}}{V_{OV}}\right) V_D \geq V_G + \hat{v_i} + \frac{2V_{DD}}{V_{OV}} \hat{v_i}  - V_t  \\
  \Rightarrow & V_D \geq \frac{V_{OV} + \hat{v_i} + 2 V_{DD} (\hat{v_i} / V_{OV}) }{1 + 2(\hat{v_i}/V_{OV})} 
\end{align*}
\footnotetext{Since $A_v, v_i$ and $v_i$ are in opposite sign, so in the worse case, we shall consider $-A_v \hat{v_i}$ and $\hat{v_i}$}
Which is the desired result.
Plug in the value and let $V_D$ be the maximum possible value we found out that
\begin{alignat*}{3}
  & V_{OV} &&= m \hat{v_i} && = \SI{200}{\mV} \\
  & V_{D} &&= \frac{V_{OV} + \hat{v_i} + 2 V_{DD} (\hat{v_i} / V_{OV}) }{1 + 2(\hat{v_i}/V_{OV})} && \approx \SI{683}{\mV} \\
  & A_v &&= -\frac{2(V_{DD} - V_D)}{V_{OV}}  && \approx -23.2 \\
  & \hat{v_o} &&= \abs{A_v} \hat{v_i} && \approx \SI{464}\mV \\
\end{alignat*}
If moreover, $I_D = \SI{100}{\uA}$,
\begin{alignat*}{3}
  & R_D &&= \frac{V_{DD} - V_D}{I_D}  && \approx \SI{23.17}{\kohm} \\
  & \frac{W}{L} &&= I_D / \left(\frac{1}{2} k'_n V_{OV}^2 \right) && = 50
\end{alignat*}

\section{5.56}

\section{5.72}

% 52: 61
\section{5.80}
The NMOS transistor in the CS amplifier shown in Figure~\ref{fig:} has $V_t = \SI{0.7}{\V}$ and $V_A = \SI{50}{\V}$.

\begin{enumerate}
  \item Neglecting the Early effect, verify that the MOSFET is operating in saturation with $I_D = \SI{0.5}{\mA}$  and $V_{OV} = \SI{0.3}{\V}$. What must the MOSFET's $k_n$ be? What is the dc voltage at the drain?
  \item Find $R_{in}$ and $G_v$.
  \item If $v_{sig}$ is a sinusoid with a peak amplitude $\hat{v}_{sig}$, find the maximum allowable value of $\hat{v}_{sig}$ for which the transistor remains in saturation. What is the corresponding amplitude of the output voltage?
  \item What is the value of resistance $R_s$ that needs to be inserted in series with capacitor $C_S$ in order to allow us to double the input signal $\hat{v}_{sig}$? What output voltage now results?
\end{enumerate}

\begin{figure}[H]
\begin{center}
  \begin{circuitikz}[>=triangle 45, scale=1, transform shape]
    \draw[default]
    (0, 0) node[ground]{} to[V, l=$v_{sig}$] ++(0, 3) to[R, l=120<\kohm>, -o] ++(2, 0) to[C, l=$C_{C1}$, -*] ++(3, 0) 
    coordinate(v1) to[R, l=200<\kohm>] ++(0, -3) node[ground]{}
    (v1) to[R, l=300<\kohm>] ++(0, 3) coordinate(v5)
    (v1) to[short] ++(1, 0) node[nmos, anchor=G](q1){}
    (q1.S) to[short] ++(0, -.5) coordinate(v2) to[R, l=2<\kohm>] ++(0, -1.75) node[ground]{}
    (v2) to[C, l=$C_S$] ++(2, 0) node[ground]{}
    (q1.D) to[short, -*] ++(.5, 0) coordinate(v3) to[R, l=5<\kohm>] ++(0, 2) coordinate(v4)
    (v3) to[C, l=$C_{C2}$, -*] ++(3, 0) coordinate(v6) to[R, l=5<\kohm>] ++(0, -2) node[ground]{} 
    (v6) to[short, -o] ++(.5, 0) node[right]{$v_o$}
    ;
    \draw[default, ->] (v5) -- ++(0, .5) node[right, above]{$+\SI{5}{\V}$};
    \draw[default, ->] (v4) -- ++(0, .75) ;
  \end{circuitikz}
\end{center}
\caption{}
\label{fig:}
\end{figure}


% 53: 63
\section{5.81}
The PMOS transistor in the CS amplifier of Figure~\ref{fig:} has $V_{tp} = \SI{-0.7}{\V}$ and a very large $\abs{V_A}$.
\begin{enumerate}[(a)]
  \item Select a value for $R_S$ to bias the transistor at $I_D = \SI{0.3}{\mA}$ and $\abs{V_{OV}} = \SI{0.3}{V}$. Assume $v_{sig}$ to have a zero dc component.
  \item Select a value for $R_D$ that results in $G_v = \SI{10}{\V\per\V}$.
  \item Find the largest sinusiod $\hat{v}_{sig}$ that the amplifier can handle while remaining in the saturation region. What is the corresponding signal at the output?
  \item If to obtain reasonably linear operation $\hat{v}_{sig}$ is limited to $\SI{50}{\mV}$, what value can $R_D$ be increased to while maintaining saturation-region operation? What is the new value of $G_v$.
\end{enumerate}

\begin{figure}[H]
  \centering
  \begin{circuitikz}[>=triangle 45, scale=1, transform shape]
    \draw[default]
    (0, 0) node[ground]{} to[V, l=$v_{sig}$] ++(0, 2) to[R, l=$R_{sig}$, -o] ++(3, 0) to[short] ++(0, 1) node[pmos, anchor=G](q1){}
      (q1.S) to[short, -*] ++(0, 0.5) coordinate(v1) to[R, l=$R_S$] ++(0, 2) coordinate(v2)
      (q1.D) to[short, -*] ++(0, -0.5) coordinate(v3) to[R, l=$R_D$] ++(0, -2) coordinate(v4)
      (v1) to[C, l=$C_S$] ++(2, 0) node[ground]{}
      (v3) to[C, l=$C_C$, -o] ++(2, 0) node[right]{$v_o$}
    ;
    \draw[default, ->] (v2) -- ++(0, 0.5) node[above]{$+\SI{2.5}{\V}$};
    \draw[default, ->] (v4) -- ++(0, -0.5) node[below]{$\SI{-2.5}{\V}$};
  \end{circuitikz}
\end{figure}

% 60: 74
\section{5.83}
\begin{enumerate}[(a)]
  \item The NMOS transistor in the source-follower circuit of Figure~\ref{fig:5.83a} has $g_m = \SI{5}{\mA\per\V}$
    and a large $r_o$. Find the open-circuit voltage gain and the output resistance.
  \item The NMOS transistor in the common-gate amplifier of Figure~\ref{fig:5.83b} has $g_m = \SI{5}{\mA\per\V}$ and
    a large $r_o$. Find the input resistance and the voltage gain.
  \item If the output of the source follower in (a) is connected to the input of the common-gate amplifier in (b), use the results of (a) and (b) to obtain the overall voltage gain $v_o/v_i$.
\end{enumerate}

\begin{figure}[H]
  \centering
  \begin{subfigure}[b]{0.5\textwidth}
    \begin{circuitikz}[>=triangle 45, scale=1, transform shape]
      \draw[default]
      (0, 0) to[R, l={$\SI{10}\kohm$}] ++(0, 2) node[](v1){} to[C, l=$\infty$, *-o] ++(2, 0) node[right]{\color{red}$v_{o1}$}
      (v1) to[short] ++(0, 1) node[nmos, anchor=S](n1){}
      (n1.G) to[short, -o] ++(-1, 0) node[left]{\color{red}$v_i$}
      ;
      \draw[default, ->] (n1.D) -- ++(0, 1) ;
      \draw[default, ->] (0, 0) -- ++(0, -1) ;
        ;
    \end{circuitikz}
    \caption{}
    \label{fig:5.83a}
  \end{subfigure}%
  \begin{subfigure}[b]{0.5\textwidth}
    \begin{circuitikz}[>=triangle 45, scale=1, transform shape]
      \draw[default]
      (0, 0) to[R, l=$\SI{10}\kohm$] ++(0, 2) node[](v1){} to[short, -o]  ++(-0.5, 0) node[left]{\color{red}$v_{i2}$}
      (v1) to[short] ++(0, 0.5) node[nmos, anchor=S, xscale=-1.0](q1){}
      (q1.G) -| ++(0.3, -0.3) node[ground]{}
      (q1.D) to[short, -*] ++(0, 0.5) coordinate(v2) to[R, l=5<\kohm>] ++(0, 2)  coordinate(v3)
      (v2) to[C, l=$\infty$] ++(2.5, 0) coordinate(v4) to[R, l=2<\kohm>] ++(0, -2) node[ground]{}
      (v4) to[short, *-o] ++(0.5, 0) node[right]{$v_o$}
      ;
      \draw[default, ->] (v3) --  ++(0, 0.5);
      \draw[default, ->] (0, 0) --  ++(0, -0.5);
    \end{circuitikz}
    \caption{}
    \label{fig:5.83b}
  \end{subfigure}
  \caption{}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \bibliographystyle{plain}
% \begin{thebibliography}{99}
% \bibitem[1]{ex}\url{http://www.example.com/}
% \end{thebibliography}
\end{document}
